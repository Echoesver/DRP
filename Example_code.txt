#### Example code that you might run in an interactive session

## Using the app from inside a script
import os
os.environ['DJANGO_SETTINGS_MODULE'] = 'DRP.settings'
import django

django.setup()

from DRP import settings
from django.core.management.base import BaseCommand
from django import db
from django.conf import settings
import logging
import importlib
from django.db import transaction
from DRP.models import PerformedReaction, Descriptor, NumRxnDescriptorValue, Compound, Reaction, CompoundQuantity


## the recommended base descriptors
rec_descs = ["C_mols","Cr_mols","Ga_mols","H_mols","I_mols","Inorg_amount_molarity","Inorg_boolean_group_10_DRP_1_5_False_molarity","Inorg_boolean_group_11_DRP_1_5_False_molarity","Inorg_boolean_group_12_DRP_1_5_any","Inorg_boolean_group_12_DRP_1_5_False_molarity","Inorg_boolean_group_13_DRP_1_5_any","Inorg_boolean_group_13_DRP_1_5_False_count","Inorg_boolean_group_13_DRP_1_5_False_molarity","Inorg_boolean_group_13_DRP_1_5_True_count","Inorg_boolean_group_13_DRP_1_5_True_molarity","Inorg_boolean_group_14_DRP_1_5_any","Inorg_boolean_group_14_DRP_1_5_False_molarity","Inorg_boolean_group_14_DRP_1_5_True_count","Inorg_boolean_group_15_DRP_1_5_any","Inorg_boolean_group_15_DRP_1_5_False_molarity","Inorg_boolean_group_16_DRP_1_5_True_molarity","Inorg_boolean_group_17_DRP_1_5_any","Inorg_boolean_group_17_DRP_1_5_False_molarity","Inorg_boolean_group_18_DRP_1_5_False_molarity","Inorg_boolean_group_1_DRP_1_5_any","Inorg_boolean_group_1_DRP_1_5_False_count","Inorg_boolean_group_1_DRP_1_5_False_molarity","Inorg_boolean_group_1_DRP_1_5_True_count","Inorg_boolean_group_1_DRP_1_5_True_molarity","Inorg_boolean_group_2_DRP_1_5_False_molarity","Inorg_boolean_group_3_DRP_1_5_False_molarity","Inorg_boolean_group_4_DRP_1_5_False_molarity","Inorg_boolean_group_5_DRP_1_5_any","Inorg_boolean_group_5_DRP_1_5_False_count","Inorg_boolean_group_5_DRP_1_5_False_molarity","Inorg_boolean_group_5_DRP_1_5_True_molarity","Inorg_boolean_group_6_DRP_1_5_any","Inorg_boolean_group_6_DRP_1_5_False_count","Inorg_boolean_group_6_DRP_1_5_False_molarity","Inorg_boolean_group_7_DRP_1_5_False_molarity","Inorg_boolean_group_8_DRP_1_5_False_molarity","Inorg_boolean_group_9_DRP_1_5_any","Inorg_boolean_group_9_DRP_1_5_False_molarity","Inorg_boolean_period_1_DRP_1_5_any","Inorg_boolean_period_1_DRP_1_5_False_molarity","Inorg_boolean_period_2_DRP_1_5_True_molarity","Inorg_boolean_period_3_DRP_1_5_any","Inorg_boolean_period_3_DRP_1_5_False_count","Inorg_boolean_period_3_DRP_1_5_False_molarity","Inorg_boolean_period_3_DRP_1_5_True_count","Inorg_boolean_period_3_DRP_1_5_True_molarity","Inorg_boolean_period_4_DRP_1_5_any","Inorg_boolean_period_4_DRP_1_5_False_count","Inorg_boolean_period_4_DRP_1_5_False_molarity","Inorg_boolean_period_4_DRP_1_5_True_count","Inorg_boolean_period_4_DRP_1_5_True_molarity","Inorg_boolean_period_5_DRP_1_5_any","Inorg_boolean_period_5_DRP_1_5_False_count","Inorg_boolean_period_5_DRP_1_5_False_molarity","Inorg_boolean_period_5_DRP_1_5_True_count","Inorg_boolean_period_5_DRP_1_5_True_molarity","Inorg_boolean_period_6_DRP_1_5_False_molarity","Inorg_boolean_period_7_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_10_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_11_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_12_DRP_1_5_any","Inorg_drpInorgAtom_boolean_group_12_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_13_DRP_1_5_any","Inorg_drpInorgAtom_boolean_group_13_DRP_1_5_False_count","Inorg_drpInorgAtom_boolean_group_13_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_13_DRP_1_5_True_count","Inorg_drpInorgAtom_boolean_group_13_DRP_1_5_True_molarity","Inorg_drpInorgAtom_boolean_group_14_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_15_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_16_DRP_1_5_any","Inorg_drpInorgAtom_boolean_group_16_DRP_1_5_False_count","Inorg_drpInorgAtom_boolean_group_16_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_16_DRP_1_5_True_molarity","Inorg_drpInorgAtom_boolean_group_17_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_18_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_1_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_2_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_3_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_4_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_5_DRP_1_5_any","Inorg_drpInorgAtom_boolean_group_5_DRP_1_5_False_count","Inorg_drpInorgAtom_boolean_group_5_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_5_DRP_1_5_True_molarity","Inorg_drpInorgAtom_boolean_group_6_DRP_1_5_any","Inorg_drpInorgAtom_boolean_group_6_DRP_1_5_False_count","Inorg_drpInorgAtom_boolean_group_6_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_7_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_8_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_9_DRP_1_5_any","Inorg_drpInorgAtom_boolean_group_9_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_period_1_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_period_2_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_period_3_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_period_4_DRP_1_5_any","Inorg_drpInorgAtom_boolean_period_4_DRP_1_5_False_count","Inorg_drpInorgAtom_boolean_period_4_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_period_4_DRP_1_5_True_count","Inorg_drpInorgAtom_boolean_period_4_DRP_1_5_True_molarity","Inorg_drpInorgAtom_boolean_period_5_DRP_1_5_any","Inorg_drpInorgAtom_boolean_period_5_DRP_1_5_False_count","Inorg_drpInorgAtom_boolean_period_5_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_period_5_DRP_1_5_True_count","Inorg_drpInorgAtom_boolean_period_5_DRP_1_5_True_molarity","Inorg_drpInorgAtom_boolean_period_6_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_period_7_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_valence_0_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_valence_1_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_valence_2_DRP_1_5_any","Inorg_drpInorgAtom_boolean_valence_2_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_valence_3_DRP_1_5_any","Inorg_drpInorgAtom_boolean_valence_3_DRP_1_5_False_count","Inorg_drpInorgAtom_boolean_valence_3_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_valence_3_DRP_1_5_True_count","Inorg_drpInorgAtom_boolean_valence_3_DRP_1_5_True_molarity","Inorg_drpInorgAtom_boolean_valence_4_DRP_1_5_any","Inorg_drpInorgAtom_boolean_valence_4_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_valence_5_DRP_1_5_any","Inorg_drpInorgAtom_boolean_valence_5_DRP_1_5_False_count","Inorg_drpInorgAtom_boolean_valence_5_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_valence_5_DRP_1_5_True_molarity","Inorg_drpInorgAtom_boolean_valence_6_DRP_1_5_any","Inorg_drpInorgAtom_boolean_valence_6_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_valence_6_DRP_1_5_True_count","Inorg_drpInorgAtom_boolean_valence_6_DRP_1_5_True_molarity","Inorg_drpInorgAtom_boolean_valence_7_DRP_1_5_False_molarity","Inorg_drpInorgAtomAtomicRadius_geom_stoich_DRP_0_02_gmean_count","Inorg_drpInorgAtomAtomicRadius_geom_stoich_DRP_0_02_gmean_molarity","Inorg_drpInorgAtomAtomicRadius_geom_stoich_DRP_0_02_Max","Inorg_drpInorgAtomAtomicRadius_geom_stoich_DRP_0_02_Range","Inorg_drpInorgAtomAtomicRadius_geom_unw_DRP_0_02_gmean_count","Inorg_drpInorgAtomAtomicRadius_geom_unw_DRP_0_02_gmean_molarity","Inorg_drpInorgAtomAtomicRadius_geom_unw_DRP_0_02_Max","Inorg_drpInorgAtomAtomicRadius_geom_unw_DRP_0_02_Range","Inorg_drpInorgAtomAtomicRadius_max_DRP_0_02_gmean_count","Inorg_drpInorgAtomAtomicRadius_max_DRP_0_02_gmean_molarity","Inorg_drpInorgAtomAtomicRadius_max_DRP_0_02_Max","Inorg_drpInorgAtomAtomicRadius_max_DRP_0_02_Range","Inorg_drpInorgAtomElectronAffinity_geom_stoich_DRP_0_02_gmean_count","Inorg_drpInorgAtomElectronAffinity_geom_stoich_DRP_0_02_Max","Inorg_drpInorgAtomElectronAffinity_geom_stoich_DRP_0_02_Range","Inorg_drpInorgAtomElectronAffinity_geom_unw_DRP_0_02_gmean_count","Inorg_drpInorgAtomElectronAffinity_geom_unw_DRP_0_02_Max","Inorg_drpInorgAtomElectronAffinity_geom_unw_DRP_0_02_Range","Inorg_drpInorgAtomElectronAffinity_max_DRP_0_02_gmean_count","Inorg_drpInorgAtomElectronAffinity_max_DRP_0_02_Max","Inorg_drpInorgAtomElectronAffinity_max_DRP_0_02_Range","Inorg_drpInorgAtomHardness_geom_stoich_DRP_0_02_gmean_count","Inorg_drpInorgAtomHardness_geom_stoich_DRP_0_02_Max","Inorg_drpInorgAtomHardness_geom_stoich_DRP_0_02_Range","Inorg_drpInorgAtomHardness_geom_unw_DRP_0_02_gmean_count","Inorg_drpInorgAtomHardness_geom_unw_DRP_0_02_Max","Inorg_drpInorgAtomHardness_geom_unw_DRP_0_02_Range","Inorg_drpInorgAtomHardness_max_DRP_0_02_gmean_count","Inorg_drpInorgAtomHardness_max_DRP_0_02_Max","Inorg_drpInorgAtomHardness_max_DRP_0_02_Range","Inorg_drpInorgAtomIonizationEnergy_geom_stoich_DRP_0_02_gmean_count","Inorg_drpInorgAtomIonizationEnergy_geom_stoich_DRP_0_02_Max","Inorg_drpInorgAtomIonizationEnergy_geom_stoich_DRP_0_02_Range","Inorg_drpInorgAtomIonizationEnergy_geom_unw_DRP_0_02_gmean_count","Inorg_drpInorgAtomIonizationEnergy_geom_unw_DRP_0_02_Max","Inorg_drpInorgAtomIonizationEnergy_geom_unw_DRP_0_02_Range","Inorg_drpInorgAtomIonizationEnergy_max_DRP_0_02_gmean_count","Inorg_drpInorgAtomIonizationEnergy_max_DRP_0_02_Max","Inorg_drpInorgAtomIonizationEnergy_max_DRP_0_02_Range","Inorg_drpInorgAtomPaulingElectronegativity_geom_stoich_DRP_0_02_gmean_count","Inorg_drpInorgAtomPaulingElectronegativity_geom_stoich_DRP_0_02_Max","Inorg_drpInorgAtomPaulingElectronegativity_geom_stoich_DRP_0_02_Range","Inorg_drpInorgAtomPaulingElectronegativity_geom_unw_DRP_0_02_gmean_count","Inorg_drpInorgAtomPaulingElectronegativity_geom_unw_DRP_0_02_Max","Inorg_drpInorgAtomPaulingElectronegativity_geom_unw_DRP_0_02_Range","Inorg_drpInorgAtomPaulingElectronegativity_max_DRP_0_02_gmean_count","Inorg_drpInorgAtomPaulingElectronegativity_max_DRP_0_02_Max","Inorg_drpInorgAtomPaulingElectronegativity_max_DRP_0_02_Range","Inorg_drpInorgAtomPearsonElectronegativity_geom_stoich_DRP_0_02_gmean_count","Inorg_drpInorgAtomPearsonElectronegativity_geom_stoich_DRP_0_02_Max","Inorg_drpInorgAtomPearsonElectronegativity_geom_stoich_DRP_0_02_Range","Inorg_drpInorgAtomPearsonElectronegativity_geom_unw_DRP_0_02_gmean_count","Inorg_drpInorgAtomPearsonElectronegativity_geom_unw_DRP_0_02_Max","Inorg_drpInorgAtomPearsonElectronegativity_geom_unw_DRP_0_02_Range","Inorg_drpInorgAtomPearsonElectronegativity_max_DRP_0_02_gmean_count","Inorg_drpInorgAtomPearsonElectronegativity_max_DRP_0_02_Max","Inorg_drpInorgAtomPearsonElectronegativity_max_DRP_0_02_Range","Inorg_mw_DRP_rdkit_0_02_gmean_count","Inorg_mw_DRP_rdkit_0_02_gmean_molarity","Inorg_mw_DRP_rdkit_0_02_Max","Inorg_mw_DRP_rdkit_0_02_Range","K_mols","leak","Mo_mols","N_mols","Na_mols","O_mols","Org_amount_molarity","Org_boolean_group_10_DRP_1_5_False_molarity","Org_boolean_group_11_DRP_1_5_False_molarity","Org_boolean_group_12_DRP_1_5_False_molarity","Org_boolean_group_13_DRP_1_5_False_molarity","Org_boolean_group_14_DRP_1_5_True_molarity","Org_boolean_group_15_DRP_1_5_any","Org_boolean_group_15_DRP_1_5_False_count","Org_boolean_group_15_DRP_1_5_True_molarity","Org_boolean_group_16_DRP_1_5_any","Org_boolean_group_16_DRP_1_5_False_molarity","Org_boolean_group_17_DRP_1_5_any","Org_boolean_group_17_DRP_1_5_False_molarity","Org_boolean_group_18_DRP_1_5_False_molarity","Org_boolean_group_1_DRP_1_5_True_molarity","Org_boolean_group_2_DRP_1_5_False_molarity","Org_boolean_group_3_DRP_1_5_False_molarity","Org_boolean_group_4_DRP_1_5_False_molarity","Org_boolean_group_5_DRP_1_5_False_molarity","Org_boolean_group_6_DRP_1_5_False_molarity","Org_boolean_group_7_DRP_1_5_False_molarity","Org_boolean_group_8_DRP_1_5_False_molarity","Org_boolean_group_9_DRP_1_5_False_molarity","Org_boolean_period_1_DRP_1_5_True_molarity","Org_boolean_period_2_DRP_1_5_True_molarity","Org_boolean_period_3_DRP_1_5_any","Org_boolean_period_3_DRP_1_5_False_molarity","Org_boolean_period_4_DRP_1_5_any","Org_boolean_period_4_DRP_1_5_False_molarity","Org_boolean_period_5_DRP_1_5_False_molarity","Org_boolean_period_6_DRP_1_5_False_molarity","Org_boolean_period_7_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_10_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_11_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_12_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_13_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_14_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_15_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_16_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_17_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_18_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_1_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_2_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_3_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_4_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_5_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_6_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_7_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_8_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_9_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_period_1_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_period_2_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_period_3_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_period_4_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_period_5_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_period_6_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_period_7_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_valence_0_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_valence_1_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_valence_2_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_valence_3_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_valence_4_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_valence_5_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_valence_6_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_valence_7_DRP_1_5_False_molarity","Org_mw_DRP_rdkit_0_02_gmean_count","Org_mw_DRP_rdkit_0_02_gmean_molarity","Org_mw_DRP_rdkit_0_02_Max","Ox_amount_count","Ox_amount_molarity","Ox_boolean_group_10_DRP_1_5_False_molarity","Ox_boolean_group_11_DRP_1_5_False_molarity","Ox_boolean_group_12_DRP_1_5_False_molarity","Ox_boolean_group_13_DRP_1_5_False_molarity","Ox_boolean_group_14_DRP_1_5_True_molarity","Ox_boolean_group_15_DRP_1_5_False_molarity","Ox_boolean_group_16_DRP_1_5_True_molarity","Ox_boolean_group_17_DRP_1_5_False_molarity","Ox_boolean_group_18_DRP_1_5_False_molarity","Ox_boolean_group_1_DRP_1_5_True_molarity","Ox_boolean_group_2_DRP_1_5_False_molarity","Ox_boolean_group_3_DRP_1_5_False_molarity","Ox_boolean_group_4_DRP_1_5_False_molarity","Ox_boolean_group_5_DRP_1_5_False_molarity","Ox_boolean_group_6_DRP_1_5_False_molarity","Ox_boolean_group_7_DRP_1_5_False_molarity","Ox_boolean_group_8_DRP_1_5_False_molarity","Ox_boolean_group_9_DRP_1_5_False_molarity","Ox_boolean_period_1_DRP_1_5_False_molarity","Ox_boolean_period_2_DRP_1_5_True_molarity","Ox_boolean_period_3_DRP_1_5_True_molarity","Ox_boolean_period_4_DRP_1_5_False_molarity","Ox_boolean_period_5_DRP_1_5_False_molarity","Ox_boolean_period_6_DRP_1_5_False_molarity","Ox_boolean_period_7_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_10_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_11_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_12_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_13_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_14_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_15_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_16_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_17_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_18_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_1_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_2_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_3_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_4_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_5_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_6_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_7_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_8_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_9_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_period_1_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_period_2_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_period_3_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_period_4_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_period_5_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_period_6_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_period_7_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_valence_0_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_valence_1_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_valence_2_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_valence_3_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_valence_4_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_valence_5_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_valence_6_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_valence_7_DRP_1_5_False_molarity","reaction_pH","reaction_temperature","reaction_time","Se_mols","slow_cool","Solv_amount_molarity","Solv_boolean_group_10_DRP_1_5_False_molarity","Solv_boolean_group_11_DRP_1_5_False_molarity","Solv_boolean_group_12_DRP_1_5_False_molarity","Solv_boolean_group_13_DRP_1_5_False_molarity","Solv_boolean_group_14_DRP_1_5_False_molarity","Solv_boolean_group_15_DRP_1_5_False_molarity","Solv_boolean_group_16_DRP_1_5_True_molarity","Solv_boolean_group_17_DRP_1_5_False_molarity","Solv_boolean_group_18_DRP_1_5_False_molarity","Solv_boolean_group_1_DRP_1_5_True_molarity","Solv_boolean_group_2_DRP_1_5_False_molarity","Solv_boolean_group_3_DRP_1_5_False_molarity","Solv_boolean_group_4_DRP_1_5_False_molarity","Solv_boolean_group_5_DRP_1_5_False_molarity","Solv_boolean_group_6_DRP_1_5_False_molarity","Solv_boolean_group_7_DRP_1_5_False_molarity","Solv_boolean_group_8_DRP_1_5_False_molarity","Solv_boolean_group_9_DRP_1_5_False_molarity","Solv_boolean_period_1_DRP_1_5_True_molarity","Solv_boolean_period_2_DRP_1_5_True_molarity","Solv_boolean_period_3_DRP_1_5_False_molarity","Solv_boolean_period_4_DRP_1_5_False_molarity","Solv_boolean_period_5_DRP_1_5_False_molarity","Solv_boolean_period_6_DRP_1_5_False_molarity","Solv_boolean_period_7_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_10_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_11_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_12_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_13_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_14_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_15_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_16_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_17_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_18_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_1_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_2_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_3_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_4_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_5_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_6_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_7_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_8_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_9_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_period_1_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_period_2_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_period_3_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_period_4_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_period_5_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_period_6_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_period_7_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_valence_0_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_valence_1_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_valence_2_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_valence_3_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_valence_4_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_valence_5_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_valence_6_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_valence_7_DRP_1_5_False_molarity","Te_mols","V_mols"]


## converting to csvHeaders 
csvheaders = [[i.csvHeader, i] for i in Descriptor.objects.filter(heading__in=rec_descs)]
csvheaders = ['performedDateTime', 'performedBy', 'user', 'public', 'legacyRecommendedFlag', 'legacyRef', 'labBookPage', 'duplicateOf', 'recalculate', 'notes', 'legacyID', 'valid', 'dirty', 'id', 'insertedDateTime', 'convertedLegacyRef', 'reaction_ptr', 'calculating', 'recommendation', 'reference', 'labGroup'] + csvheaders


## writing to csv
import csv

toCSV = list(PerformedReaction.objects.filter(pk__in=reactions_pks[0:5]).rows(expanded=True, whitelist=['Outcome'] + possible_headings))

keys = toCSV[0].keys()
with open('{}.csv'.format(csv_file_name), 'wb') as output_file:
    dict_writer = csv.DictWriter(output_file, keys)
    dict_writer.writeheader()
    dict_writer.writerows(toCSV)


## calculating descriptors (may be where the issue lies, though)
rxnDescriptorPlugins = [importlib.import_module(plugin) for
                        plugin in settings.RXN_DESCRIPTOR_PLUGINS]

underpopulated_pks = [i.pk for i in Reaction.objects.all() if NumRxnDescriptorValue.objects.filter(reaction__pk=i.pk).count() <= 500 ]

for i in range(30):
  reactions = Reaction.objects.filter(pk__in=(underpopulated_pks+underpopulated_pks)[i*len(underpopulated_pks):i+1*len(underpopulated_pks)])
  for plugin in rxnDescriptorPlugins[1:]:  #rxnDescriptorPlugin[0] is the hash generator on my machine and works a little differently
      print(plugin)
      plugin.calculate_many(reactions, whitelist=rec_descs, bulk_delete=True)



## calculating molecular descriptors (takes ~2 days, deletes lots of stuff and starts from scratch each time because I don't have a good white list for this)
molDescriptorPlugins = [importlib.import_module(plugin) for
                          plugin in settings.MOL_DESCRIPTOR_PLUGINS] # if 'drp' not in str(plugin)]                                                                                                                                    


print('descriptor plugs \n', molDescriptorPlugins)
print('compounds \n', Compound.objects.all(), '\n\n\n')


counter = 0
for comp in Compound.objects.all():
   counter += 1
   print(comp.smiles)
   print(counter)
   for plugin in molDescriptorPlugins:
       print(NumMolDescriptorValue.objects.filter(compound=comp).count())
       plugin.calculate(comp)
       print(NumMolDescriptorValue.objects.filter(compound=comp).count())










